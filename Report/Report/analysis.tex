% !TEX root = ../main.tex
% !TEX spellcheck = en_GB

\chapter{Analysis}
\fxnote{Introduction to the system. Introduction to Thiele/Small via circuit analysis. Introduction of each subsystem's TF (both from Tore's book and derived).}
This section describes the analysis of the system; how the system is envisioned to be created, which subsystems it will consist of and the tasks each subsystem has to be able to perform to meet the specified requirements.

\section{Loudspeaker Modelling}
The loudspeaker system can consist of multiple drive units reproducing sound in different frequency spectra.
The drive unit can be parted in three equivalent circuits representing the electrical, the mechanical and the acoustical element. 
Each of these elements can be converted to its electrical equivalent and be represented with an Ohm's Law analogy \cite[p.~115]{Elektroakustik}.

The electrical element of the drive unit is specified by the voice coil with its DC resistance $R_e$ and self inductance $L_e$. 
The coupling between the electrical and the mechanical elements is specified as the force factor $Bl$. 
This is the product of the magnetic field in the voice coil gap and the length of the voice coil in the magnetic field. \cite[p.~34]{Elektroakustik}

The mechanical element of the drive unit is specified by the mass $M_{MD}$ of the diaphragm, the mechanical damping $R_{MS}$ and the compliance $C_{MS}$. 
The mechanical element will introduce a resonance frequency $f_S$ and is described by its quality factor $Q_{MS}$. 
A total quality factor $Q_{TS}$ is found when combining the Q-factor for the electrical and mechanical elements, $\frac{Q_{ES}Q_{MS}}{Q_{ES}+Q_{MS}}$.

The acoustical element of the drive unit is specified by an acoustical impedance in front and behind the diaphragm. 
The acoustical impedance in front is given by the relation between sound pressure $p$ and volume velocity $q$ which is the velocity of air that is moved by the diaphragm. 

These parameters are known as Thiele/Small parameters and are used to specify the performance of a drive unit and is derived by A.N. Thiele \cite{thiele1971loudspeakers} and Richard H. Small \cite{small1972closed}.
The parameters can be used to decide the volume of the loudspeaker cabinet and the length of the bass-reflex port. 
The best performance often includes improving the bass response and to obtain a flatness in general of the frequency response. 
The physical parameters of the drive unit can be found in the datasheet.

\paragraph{$R_E$} is the DC resistance of the voice coil.

\paragraph{$L_E$} is the inductance of the voice coil.

\paragraph{$f_s$} is the resonance frequency.

\paragraph{$Q_{TS}$} is the combined electric and mechanical damping of the drive unit.

\paragraph{$M_{MS}$} is the mass of the drive unit's moving parts including acoustic load.

\paragraph{$C_{MS}$} is the mechanical compliance of the drive unit's suspension.

\paragraph{$R_{MS}$} is the mechanical resistance of the drive unit's suspension.

\paragraph{$Bl$} is the force factor determined by the product of the magnetic flux density in the air gap and the length of wire in the air gap.

\paragraph{$S_D$} is the surface area of the drive unit's diapraghm.

\section{Transfer Functions}
The loudspeaker being modelled in this project has been parted in 4 subsystems; a drive unit, a cross-over filter, a cabinet and a bass reflex. 
Each subsystem have a transfer function that can be derived from the Thiele/Small parameters.
\subsection{Drive Unit}
The drive unit can be modelled as mounted in an infinite baffle, separating the front and back side of the diaphragm, thus avoiding acoustic short circuiting. 
Placing the drive unit in an infinite baffle prevents the pressure at the front and back to eliminate each other. \cite[p.~44]{Elektroakustik}  
The transfer function for a drive unit placed in an infinite baffle is shown in \cref{eq:dutfinfinite}.
The sound pressure is specified at a distance $r=\SI{1}{\meter}$.  \fxnote{Potentially show the long equation taking into account diffraction and reflection?}

\begin{equation}
p = \frac{\rho S_D B l U_G}{2\pi r M_{MS} R_E}\left|\frac{s^2}{s^2 + \frac{\omega_s}{Q_{TS}}s+\omega_s^2}\right|
\label{eq:dutfinfinite}
\end{equation}

In this project the drive unit is being modelled as mounted in an infinite enclosure, a closed cabinet.
Placing the drive unit in enclosure will prevent acoustic short circuiting as well. 
The volume of the closed cabinet is characterized by the air acting like a spring (a capacity) which affects the drive unit's compliance.  
If the drive unit is placed in a very large sealed enclosure it will make the model behave like the drive unit was mounted in an infinite baffle.  
The transfer function for a drive unit placed in an enclosure is shown in \cref{eq:dutfclosed}.

\begin{equation}
p = \frac{\rho S_D B l U_G}{2\pi r M_{MS} R_E}\frac{s^2}{s^2 +s \left(\frac{(Bl)^2}{R_EM_{MS}}+\frac{R_{MS}}{M_{MS}}\right)+\frac{1}{M_{MS}C_{MS}}\left(1+\frac{C_{MS}S_D^2}{C_{AB}}\right)}
\label{eq:dutfclosed}
\end{equation}

When the volume becomes very large the compliance as well becomes very large, \cref{eq:cab}. 
In stead of change the volume of the closed cabinet it is possible to change the compliance, $C_{AB}$ in \cref{eq:dutfclosed}. 

\begin{equation}
C_{AB} = \frac{V_B}{\rho \,c^2}
\label{eq:cab}
\end{equation} 

The constant term in \cref{eq:dutfinfinite} transforms the voltage $U_G$ to the sound pressure $p$ while the complex term represent a second order high pass filter.
The transfer function of the drive unit is shown in \cref{eq:dutfderived}.

\begin{equation}
H = k\,\dfrac{s^2}{s^2+\frac{\omega_s}{Q_{TS}}+\omega_s^2}
\label{eq:dutfderived}
\end{equation}
\fxnote{Skal v√¶re lukket kabinet tf}

\subsection{Crossover Filter}
Different drive units are differently designed to reproduce the sound in specific frequency spectra.
When a loudspeaker system consist of multiple drive units a crossover filter is used to separate these frequency spectrums.
For a drive unit (tweeter) reproducing the high frequency spectrum, a second order high pass filter is used to filter the low frequency spectrum, see eq. \ref{eq:high}.
\begin{equation}
H_{T} = \frac{s^2}{\omega_0^2+2d\,\omega_0 s+s^2}
\label{eq:high}
\end{equation}

For a drive unit (woofer) reproducing the low frequency spectrum, a second order low pass filter is used to filter the high frequency spectrum, see \cref{eq:low}.
\begin{equation}
H_{W} = \frac{\omega_0^2}{\omega_0^2+2d\,\omega_0 s+s^2}
\label{eq:low}
\end{equation}

\subsection{Cabinet}

\subsection{Bass Reflex}

\section{Frequency Response}
The sound pressure is measured in \si{\decibel} SPL and is ratio of the measured sound pressure $p$ and the threshold of hearing $p_{ref}=\SI{20}{\micro\pascal}$, see \cref{eq:soundpressure}.

\begin{equation}
L=20\log_{10}\left(\frac{p}{p_{ref}}\right)
\label{eq:soundpressure}
\end{equation}

The formulas applies in an area between the drive unit's resonance frequency $f_S$ and approx. the frequency $f_1\approx\frac{c}{2\pi a}$ where $a$ is the radius of the drive unit's baffle and $c$ is the velocity of sound. \cite[p.~41]{Elektroakustik}

\section{References}
\begin{itemize}
	\item The design of second-order crossover filter
	\begin{itemize}
		\item Elektroakustik Version 2.6, page 82, Tore Arne Skogsberg
	\end{itemize}
	\item Model of speaker drive unit infinite baffel
	\begin{itemize}
		\item Elektroakustik Version 2.6, page 41, Tore Arne Skogsberg
	\end{itemize}
\end{itemize}



\FloatBarrier
